# üöÄ RentAdmin - Production Deployment

–ì–æ—Ç–æ–≤–∞—è –∫ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é —Å–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∞—Ä–µ–Ω–¥–æ–π –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è —Å –ø–æ–ª–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–æ–π Docker, nginx –∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–µ–π.

## üìã –ß—Ç–æ –≤–∫–ª—é—á–µ–Ω–æ –≤ production-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é

### ‚úÖ Docker Infrastructure
- **Backend Container**: Node.js –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–º Dockerfile
- **Nginx Container**: –í–µ–±-—Å–µ—Ä–≤–µ—Ä —Å –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–º –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ–º
- **SQLite Database**: –ù–∞–¥–µ–∂–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
- **Health Checks**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–æ—Å—Ç–æ—è–Ω–∏—è
- **Restart Policies**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ –ø—Ä–∏ —Å–±–æ—è—Ö

### ‚úÖ Security Features
- **CORS Protection**: –ù–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- **Rate Limiting**: –ó–∞—â–∏—Ç–∞ –æ—Ç DDoS –∞—Ç–∞–∫
- **Non-root User**: –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã —Ä–∞–±–æ—Ç–∞—é—Ç –±–µ–∑ root –ø—Ä–∞–≤
- **Security Headers**: X-Frame-Options, X-XSS-Protection –∏ –¥—Ä.
- **Firewall Configuration**: UFW –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ—Ä—Ç–æ–≤

### ‚úÖ Production Ready
- **Optimized Build**: –ú–∏–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ —Å–∂–∞—Ç–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤
- **Static Assets**: –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞—è —Ä–∞–∑–¥–∞—á–∞ —Å—Ç–∞—Ç–∏–∫–∏ —á–µ—Ä–µ–∑ nginx
- **Logging**: –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ª–æ–≥–∏ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
- **Environment Variables**: –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π

## üéØ –ë—ã—Å—Ç—Ä–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

### 1. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É cloud.ru
```bash
ssh root@87.242.103.146
```

### 2. –ó–∞–≥—Ä—É–∑–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä
```bash
# –°–æ–∑–¥–∞–Ω–∏–µ —Ä–∞–±–æ—á–µ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
mkdir -p /opt/rentadmin
cd /opt/rentadmin

# –ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞ (–≤—ã–±–µ—Ä–∏—Ç–µ –æ–¥–∏–Ω —Å–ø–æ—Å–æ–±):

# –°–ø–æ—Å–æ–± –ê: –ß–µ—Ä–µ–∑ scp —Å –≤–∞—à–µ–≥–æ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞
# scp -r /path/to/RentAdmin/* root@87.242.103.146:/opt/rentadmin/

# –°–ø–æ—Å–æ–± –ë: –ß–µ—Ä–µ–∑ wget (–µ—Å–ª–∏ –µ—Å—Ç—å –∞—Ä—Ö–∏–≤)
# wget <URL_TO_PROJECT_ARCHIVE> && unzip <archive>

# –°–ø–æ—Å–æ–± –í: –ß–µ—Ä–µ–∑ git (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π)
# git clone <YOUR_REPO_URL> .
```

### 3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ
```bash
chmod +x deploy-to-server.sh
./deploy-to-server.sh
```

### 4. –ì–æ—Ç–æ–≤–æ! üéâ
–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É: **http://87.242.103.146**

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ –¥–ª—è production

```
RentAdmin/
‚îú‚îÄ‚îÄ üê≥ docker-compose.yml          # Orchestration
‚îú‚îÄ‚îÄ üåê nginx.conf                  # Web server config
‚îú‚îÄ‚îÄ üîß .env.production             # Environment variables
‚îú‚îÄ‚îÄ üìú deploy-to-server.sh         # Full deployment script
‚îú‚îÄ‚îÄ üîÑ update-production.sh        # Quick update script
‚îú‚îÄ‚îÄ üìñ DEPLOYMENT.md               # Detailed instructions
‚îú‚îÄ‚îÄ backend/
‚îÇ   ‚îú‚îÄ‚îÄ üê≥ Dockerfile              # Backend container
‚îÇ   ‚îú‚îÄ‚îÄ üìä dev.sqlite3             # Database file
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îú‚îÄ‚îÄ frontend/
‚îÇ   ‚îú‚îÄ‚îÄ üé® dist/                   # Built static files
‚îÇ   ‚îú‚îÄ‚îÄ ‚öôÔ∏è vite.config.ts          # Build configuration
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îî‚îÄ‚îÄ üìö README-PRODUCTION.md        # This file
```

## üîß –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
```bash
cd /opt/rentadmin

# –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–æ–≤
docker-compose ps

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
docker-compose logs -f

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
docker-compose restart

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞
docker-compose down

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ
./update-production.sh
```

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
```bash
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤
docker stats

# –î–∏—Å–∫–æ–≤–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ
df -h

# –°–∏—Å—Ç–µ–º–Ω—ã–µ –ª–æ–≥–∏
journalctl -u docker -f
```

## üåç –î–æ—Å—Ç—É–ø –∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é

–ü–æ—Å–ª–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è:

- **üåê –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å**: http://87.242.103.146
- **üîå API**: http://87.242.103.146/api
- **‚ù§Ô∏è Health Check**: http://87.242.103.146/health
- **üîê PIN-–∫–æ–¥**: 20031997

## üîê –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –∏–∑–º–µ–Ω–∏—Ç–µ –≤ production:

1. **JWT Secret** –≤ `docker-compose.yml`:
```yaml
environment:
  - JWT_SECRET=–≤–∞—à-–Ω–æ–≤—ã–π-—Å–µ–∫—Ä–µ—Ç–Ω—ã–π-–∫–ª—é—á-–∑–¥–µ—Å—å
```

2. **PIN-–∫–æ–¥** –≤ `docker-compose.yml`:
```yaml
environment:
  - PIN_CODE=–≤–∞—à-–Ω–æ–≤—ã–π-–ø–∏–Ω-–∫–æ–¥
```

3. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ** –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π:
```bash
docker-compose down && docker-compose up -d
```

## üö® –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ü—Ä–æ–±–ª–µ–º–∞: –°–∞–π—Ç –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
docker-compose ps

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤ nginx
docker-compose logs nginx

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Ä—Ç–æ–≤
netstat -tulpn | grep :80
```

### –ü—Ä–æ–±–ª–µ–º–∞: API –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤ backend
docker-compose logs backend

# –ü—Ä–æ–≤–µ—Ä–∫–∞ health check
curl http://localhost/health
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∞–π–ª–∞ –ë–î
ls -la backend/dev.sqlite3

# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∞–≤
sudo chown -R 1001:1001 backend/
```

## üì¶ –ß—Ç–æ –¥–µ–ª–∞–µ—Ç —Å–∫—Ä–∏–ø—Ç deploy-to-server.sh

1. **üîß –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–∏—Å—Ç–µ–º—ã**:
   - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ Ubuntu
   - –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Docker & Docker Compose
   - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ñ–∞–π—Ä–≤–æ–ª–∞ UFW

2. **üèóÔ∏è –°–±–æ—Ä–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è**:
   - –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Node.js
   - –°–±–æ—Ä–∫–∞ frontend —Å production –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
   - –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

3. **üöÄ –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–æ–≤**:
   - –°–±–æ—Ä–∫–∞ Docker –æ–±—Ä–∞–∑–æ–≤
   - –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏

4. **‚úÖ –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è**:
   - Health checks
   - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏
   - –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

### –õ–æ–≥–∏ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏:
```bash
# –í—Å–µ —Å–µ—Ä–≤–∏—Å—ã
docker-compose logs -f

# –¢–æ–ª—å–∫–æ backend
docker-compose logs -f backend

# –¢–æ–ª—å–∫–æ nginx
docker-compose logs -f nginx

# –°–∏—Å—Ç–µ–º–Ω—ã–µ –ª–æ–≥–∏
journalctl -f
```

### –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ:
```bash
# –°–æ–∑–¥–∞–Ω–∏–µ –±—ç–∫–∞–ø–∞ –ë–î
cp backend/dev.sqlite3 backup-$(date +%Y%m%d).sqlite3

# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ
cp backup-YYYYMMDD.sqlite3 backend/dev.sqlite3
docker-compose restart backend
```

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è:

1. ‚úÖ **–ò–∑–º–µ–Ω–∏—Ç—å —Å–µ–∫—Ä–µ—Ç–Ω—ã–µ –∫–ª—é—á–∏**
2. ‚úÖ **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Ä–µ–≥—É–ª—è—Ä–Ω—ã–µ –±—ç–∫–∞–ø—ã**
3. ‚úÖ **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**
4. ‚úÖ **–î–æ–±–∞–≤–∏—Ç—å SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç** (Let's Encrypt)
5. ‚úÖ **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –¥–æ–º–µ–Ω–Ω–æ–µ –∏–º—è** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

---

**üéâ –í–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ RentAdmin –≥–æ—Ç–æ–≤–æ –∫ —Ä–∞–±–æ—Ç–µ –≤ production!**

–î–æ—Å—Ç—É–ø: http://87.242.103.146 | PIN: 20031997