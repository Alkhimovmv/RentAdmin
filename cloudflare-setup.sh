#!/bin/bash

# –ë—ã—Å—Ç—Ä–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ Cloudflare Tunnel –¥–ª—è –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞

echo "‚òÅÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Cloudflare Tunnel"
echo "=============================="
echo ""

echo "üöÄ Cloudflare Tunnel - –ª—É—á—à–µ–µ —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞!"
echo ""
echo "üí° –ü–†–ï–ò–ú–£–©–ï–°–¢–í–ê:"
echo "‚úÖ –ü–æ—Å—Ç–æ—è–Ω–Ω—ã–π –¥–æ–º–µ–Ω (–Ω–∞–ø—Ä–∏–º–µ—Ä: rentadmin.yourdomain.com)"
echo "‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π HTTPS"
echo "‚úÖ –ù–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –≤ –ø–æ—Ä—Ç–∞—Ö"
echo "‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –∑–∞ –ª—é–±—ã–º —Ñ–∞–π—Ä–≤–æ–ª–æ–º"
echo "‚úÖ –ë–µ—Å–ø–ª–∞—Ç–Ω–æ"
echo ""

echo "üìã –ü–û–®–ê–ì–û–í–ê–Ø –ù–ê–°–¢–†–û–ô–ö–ê:"
echo ""
echo "1Ô∏è‚É£ –ü–û–î–ì–û–¢–û–í–ö–ê:"
echo "   ‚Ä¢ –ó–∞–π–¥–∏—Ç–µ –Ω–∞ https://dash.cloudflare.com/"
echo "   ‚Ä¢ –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å (–±–µ—Å–ø–ª–∞—Ç–Ω–æ)"
echo ""

echo "2Ô∏è‚É£ –°–û–ó–î–ê–ù–ò–ï –¢–£–ù–ù–ï–õ–Ø:"
echo "   ‚Ä¢ Zero Trust ‚Üí Networks ‚Üí Tunnels"
echo "   ‚Ä¢ Create a tunnel"
echo "   ‚Ä¢ –ò–º—è —Ç—É–Ω–Ω–µ–ª—è: rentadmin"
echo "   ‚Ä¢ –í—ã–±–µ—Ä–∏—Ç–µ: Debian"
echo ""

echo "3Ô∏è‚É£ –£–°–¢–ê–ù–û–í–ö–ê:"
echo "   ‚Ä¢ –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—É —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∏–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞"
echo "   ‚Ä¢ –ó–∞–ø—É—Å—Ç–∏—Ç–µ –µ—ë –≤ —ç—Ç–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ"
echo "   ‚Ä¢ –ü—Ä–∏–º–µ—Ä –∫–æ–º–∞–Ω–¥—ã:"
echo "     sudo cloudflared service install [–≤–∞—à-—Ç–æ–∫–µ–Ω]"
echo ""

echo "4Ô∏è‚É£ –ù–ê–°–¢–†–û–ô–ö–ê –ú–ê–†–®–†–£–¢–ê:"
echo "   ‚Ä¢ Public Hostnames ‚Üí Add a public hostname"
echo "   ‚Ä¢ Subdomain: rentadmin (–∏–ª–∏ –ª—é–±–æ–π)"
echo "   ‚Ä¢ Domain: –≤—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à –¥–æ–º–µ–Ω"
echo "   ‚Ä¢ Service Type: HTTP"
echo "   ‚Ä¢ URL: localhost:3000"
echo ""

echo "5Ô∏è‚É£ –†–ï–ó–£–õ–¨–¢–ê–¢:"
echo "   ‚Ä¢ –í–∞—à —Å–∞–π—Ç –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ:"
echo "     https://rentadmin.yourdomain.com"
echo ""

read -p "–•–æ—Ç–∏—Ç–µ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫—É Cloudflare? (y/n): " continue_setup

if [[ $continue_setup == "y" || $continue_setup == "Y" ]]; then
    echo ""
    echo "üåê –û—Ç–∫—Ä—ã–≤–∞—é Cloudflare Dashboard..."

    # –ü—ã—Ç–∞–µ–º—Å—è –æ—Ç–∫—Ä—ã—Ç—å –±—Ä–∞—É–∑–µ—Ä
    if command -v xdg-open &> /dev/null; then
        xdg-open "https://dash.cloudflare.com/"
    elif command -v open &> /dev/null; then
        open "https://dash.cloudflare.com/"
    else
        echo "–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ: https://dash.cloudflare.com/"
    fi

    echo ""
    echo "üìã –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò:"
    echo "1. –ó–∞–≤–µ—Ä—à–∏—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫—É –≤ –±—Ä–∞—É–∑–µ—Ä–µ"
    echo "2. –í–µ—Ä–Ω–∏—Ç–µ—Å—å —Å—é–¥–∞ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø–æ–ª—É—á–µ–Ω–Ω—É—é –∫–æ–º–∞–Ω–¥—É"
    echo "3. –ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å"
    echo ""
    echo "üí° –í–ê–ñ–ù–û:"
    echo "‚Ä¢ –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –ª–æ–∫–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω (./local-start.sh)"
    echo "‚Ä¢ –í –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö —Ç—É–Ω–Ω–µ–ª—è —É–∫–∞–∂–∏—Ç–µ: localhost:3000"
    echo ""
else
    echo ""
    echo "‚ÑπÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫—É –º–æ–∂–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –ø–æ–∑–∂–µ"
    echo "–ó–∞–ø—É—Å—Ç–∏—Ç–µ: ./cloudflare-setup.sh"
fi

echo ""
echo "üîß –ê–õ–¨–¢–ï–†–ù–ê–¢–ò–í–ù–´–ï –†–ï–®–ï–ù–ò–Ø:"
echo ""
echo "üöÄ –î–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:"
echo "   ./start-remote.sh (ngrok)"
echo ""
echo "üì± –î–ª—è –º–æ–±–∏–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:"
echo "   ./local-start.sh (–ª–æ–∫–∞–ª—å–Ω–∞—è —Å–µ—Ç—å)"
echo ""
echo "üåç –î–ª—è –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞:"
echo "   ./cloudflare-setup.sh (—ç—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç)"